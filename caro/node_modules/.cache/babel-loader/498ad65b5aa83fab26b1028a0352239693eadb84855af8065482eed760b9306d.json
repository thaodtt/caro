{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mitadm\\\\Documents\\\\htmls\\\\caro\\\\caro\\\\src\\\\Board.js\",\n  _s = $RefreshSig$();\nimport Square from \"./Square\";\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Board() {\n  _s();\n  const m = 15,\n    n = 20;\n  const numConsecutiveToWin = 5;\n  const [squares, setSquares] = useState(Array(m * n).fill(null));\n  const [xIsNext, setXIsNext] = useState(true);\n  const [latestPos, setLatestPos] = useState(null);\n  // const [winner, setWinner] = useState(null);\n\n  function reset() {\n    setXIsNext(true);\n    setLatestPos(null);\n    setSquares(Array(m * n).fill(null));\n    winner = null;\n    // setWinner(null);\n  }\n  const winner = calculateWinner();\n  function handleClick(i) {\n    if (squares[i] || winner) {\n      return;\n    }\n    const nextSquares = squares.slice();\n    if (xIsNext) {\n      nextSquares[i] = \"X\";\n    } else {\n      nextSquares[i] = \"O\";\n    }\n    setSquares(nextSquares);\n    setXIsNext(!xIsNext);\n    setLatestPos(i);\n  }\n  function posToRowCol(pos) {\n    return [parseInt(pos / n), pos % n];\n  }\n  function rowColToPos(row, col) {\n    return row * n + col;\n  }\n  function calculateWinner() {\n    const [row, col] = posToRowCol(latestPos);\n    const latestSymbol = xIsNext ? \"O\" : \"X\";\n    console.log(`Current pos is ${latestPos}, row is ${row} col is ${col}, latest symbol is ${latestSymbol}`);\n\n    // check vertical\n    var upper = row,\n      lower = row;\n    console.log(`at first, upper=${upper}, lower=${lower}`);\n    while (squares[rowColToPos(upper, col)] === latestSymbol) {\n      upper--;\n      if (upper < 0) {\n        break;\n      }\n    }\n    while (squares[rowColToPos(lower, col)] === latestSymbol) {\n      lower++;\n      if (lower >= m) {\n        break;\n      }\n    }\n    console.log(`after the while loop, upper=${upper}, lower=${lower}`);\n    if (lower - upper - 1 >= numConsecutiveToWin) {\n      return latestSymbol;\n    }\n\n    // check horizontal\n    var left = col,\n      right = col;\n    while (squares[rowColToPos(row, left)] === latestSymbol) {\n      left--;\n      if (left < 0) {\n        break;\n      }\n    }\n    while (squares[rowColToPos(row, right)] === latestSymbol) {\n      right++;\n      if (right >= n) {\n        break;\n      }\n    }\n    if (right - left - 1 >= numConsecutiveToWin) {\n      return latestSymbol;\n    }\n\n    // checking up right diagonal        \n    left = col;\n    right = col;\n    while (squares[rowColToPos(row - col + left, left)] === latestSymbol) {\n      left--;\n      if (left < 0 | row - col + left >= m) {\n        break;\n      }\n    }\n    while (squares[rowColToPos(row - col + right, right)] === latestSymbol) {\n      right++;\n      if (right >= n | row - col + right <= 0) {\n        break;\n      }\n    }\n    if (right - left - 1 >= numConsecutiveToWin) {\n      return latestSymbol;\n    }\n\n    // checking up left diagonal        \n    left = col;\n    right = col;\n    while (squares[rowColToPos(row + col - left, left)] === latestSymbol) {\n      left--;\n      if (left < 0 | row + col - left <= 0) {\n        break;\n      }\n    }\n    while (squares[rowColToPos(row + col - right, right)] === latestSymbol) {\n      right++;\n      if (right >= n | row + col - right >= m) {\n        break;\n      }\n    }\n    if (right - left - 1 >= numConsecutiveToWin) {\n      return latestSymbol;\n    }\n    return null;\n  }\n  let status;\n  if (winner) {\n    status = \"Winner: \" + winner;\n  } else {\n    status = \"Next player: \" + (xIsNext ? \"X\" : \"O\");\n  }\n  const board = [];\n  for (let row = 0; row < m; row++) {\n    let board_row = [];\n    for (let col = 0; col < n; col++) {\n      board_row.push( /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[row * n + col],\n        onSquareClick: () => handleClick(row * n + col)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 28\n      }, this));\n    }\n    board.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: board_row\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 20\n    }, this));\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"left-text\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Caro chess\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Rule: each player alternates X and O, whoever gets to 5 in a row, or column or diagonal first wins.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: reset,\n        children: \"Play\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"status\",\n        children: status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this), \";\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board\",\n      children: board\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(Board, \"lqEJu6JOKvNtPrgS0sBvsOLxlJI=\");\n_c = Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["Square","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","Board","_s","m","n","numConsecutiveToWin","squares","setSquares","Array","fill","xIsNext","setXIsNext","latestPos","setLatestPos","reset","winner","calculateWinner","handleClick","i","nextSquares","slice","posToRowCol","pos","parseInt","rowColToPos","row","col","latestSymbol","console","log","upper","lower","left","right","status","board","board_row","push","value","onSquareClick","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","_c","$RefreshReg$"],"sources":["C:/Users/mitadm/Documents/htmls/caro/caro/src/Board.js"],"sourcesContent":["import Square from \"./Square\";\r\nimport { useState } from 'react';\r\n\r\nexport default function Board() {\r\n    const m=15, n=20;\r\n    const numConsecutiveToWin=5;\r\n    const [squares, setSquares] = useState(Array(m*n).fill(null));\r\n    const [xIsNext, setXIsNext] = useState(true);\r\n    const [latestPos, setLatestPos] = useState(null);\r\n    // const [winner, setWinner] = useState(null);\r\n\r\n    function reset(){\r\n        setXIsNext(true);\r\n        setLatestPos(null);\r\n        setSquares(Array(m*n).fill(null));\r\n        winner = null;\r\n        // setWinner(null);\r\n    }\r\n\r\n    const winner = calculateWinner();\r\n\r\n    function handleClick(i) {\r\n      if (squares[i] || winner) {\r\n        return;\r\n      }\r\n      const nextSquares = squares.slice();\r\n      if (xIsNext) {\r\n        nextSquares[i] = \"X\";\r\n      } else {\r\n        nextSquares[i] = \"O\";\r\n      }\r\n      setSquares(nextSquares);\r\n      setXIsNext(!xIsNext);\r\n      setLatestPos(i);\r\n    }\r\n    function posToRowCol(pos){\r\n        return [parseInt(pos/n), pos %n];\r\n    }\r\n    function rowColToPos(row, col){\r\n        return row*n+col;\r\n    }\r\n    function calculateWinner(){\r\n        const [row, col] = posToRowCol(latestPos);\r\n        const latestSymbol = xIsNext? \"O\": \"X\";\r\n        console.log(`Current pos is ${latestPos}, row is ${row} col is ${col}, latest symbol is ${latestSymbol}`);\r\n\r\n        // check vertical\r\n        var upper=row, lower=row;\r\n        console.log(`at first, upper=${upper}, lower=${lower}`);\r\n        while ((squares[rowColToPos(upper, col)]===latestSymbol)) {\r\n            upper--;\r\n            if (upper<0){break;}\r\n        }\r\n        while ((squares[rowColToPos(lower, col)]===latestSymbol)) {\r\n            lower++;\r\n            if (lower>=m){break;}\r\n        }\r\n        console.log(`after the while loop, upper=${upper}, lower=${lower}`);\r\n        if (lower - upper - 1>=numConsecutiveToWin){return latestSymbol;}\r\n\r\n        // check horizontal\r\n        var left=col, right=col;\r\n        while ((squares[rowColToPos(row, left)]===latestSymbol)) {\r\n            left--;\r\n            if (left<0){break;}\r\n        }\r\n        while ((squares[rowColToPos(row, right)]===latestSymbol)) {\r\n            right++;\r\n            if (right>=n){break;}\r\n        }\r\n        if (right - left - 1>=numConsecutiveToWin){return latestSymbol;}\r\n\r\n        // checking up right diagonal        \r\n        left=col;\r\n        right=col;\r\n        while ((squares[rowColToPos(row-col+left, left)]===latestSymbol)) {\r\n            left--;\r\n            if ((left<0)|(row-col+left)>=m){break;}\r\n        }\r\n        while ((squares[rowColToPos(row-col+right, right)]===latestSymbol)) {\r\n            right++;\r\n            if ((right>=n)|(row-col+right<=0)){break;}\r\n        }\r\n        if (right - left - 1>=numConsecutiveToWin){return latestSymbol;}\r\n        \r\n        // checking up left diagonal        \r\n        left=col;\r\n        right=col;\r\n        while ((squares[rowColToPos(row+col-left, left)]===latestSymbol)) {\r\n            left--;\r\n            if ((left<0)|(row+col-left<=0)){break;}\r\n        }\r\n        while ((squares[rowColToPos(row+col-right, right)]===latestSymbol)) {\r\n            right++;\r\n            if ((right>=n)|(row+col-right>=m)){break;}\r\n        }\r\n        if (right - left - 1>=numConsecutiveToWin){return latestSymbol;}\r\n        return null;\r\n    }\r\n\r\n    let status;\r\n    if (winner) {\r\n      status = \"Winner: \" + winner;\r\n    } else {\r\n      status = \"Next player: \" + (xIsNext ? \"X\" : \"O\");\r\n    }\r\n\r\n    const board = []\r\n    for (let row = 0; row < m; row ++) {\r\n        let board_row = [];\r\n        for (let col = 0; col < n; col ++) {\r\n            board_row.push(<Square value={squares[row*n + col]} onSquareClick={()=>handleClick(row*n + col)}/>)\r\n        }\r\n        board.push(<div className=\"board-row\">{board_row}</div>);\r\n    }\r\n    return (\r\n      <>\r\n        <div className=\"left-text\">\r\n            <h3>Caro chess</h3>\r\n            <p>Rule: each player alternates X and O, whoever gets to 5 in a row, or column or diagonal first wins.</p>\r\n            <button className=\"button\" onClick={reset}>Play</button>\r\n            <p className=\"status\">{status}</p>;\r\n        </div>\r\n        <div className=\"board\">{board}</div>\r\n      </>\r\n    );\r\n  }\r\n    \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}